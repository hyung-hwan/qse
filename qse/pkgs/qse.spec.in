%define _prefix /usr/local
%define _sysconfdir /etc

Summary: QSE Library
Name: @PACKAGE_NAME@
Version: 0.8.5
Release: 1%{?dist}
License: Simplified BSD License
Vendor: Chung, Hyung-Hwan 
URL: @PACKAGE_URL@
Group: System Environment/Libraries
Source0: %{name}-%{version}.tar.gz
#Requires: 

#BuildRequires: 
BuildRoot: %(mktemp -ud %{_tmppath}/%{name}-%{version}-%{release}-XXXXXX)
#BuildPrereq:

%description
QSE Library

%package devel
Summary: Development files for QSE
Group: System Environment/Libraries
Requires: @PACKAGE_NAME@= %{version}

%description devel
The header files and libraries for developing applications with QSE.

%prep
%setup -q

%build
RPM_OPT_FLAGS="$(echo $RPM_OPT_FLAGS | %{__sed} 's/-O2/-O3/')"
#CFLAGS="${RPM_OPT_FLAGS} -D_GNU_SOURCE" CXXFLAGS="${RPM_OPT_FLAGS} -D_GNU_SOURCE" ./configure --prefix=%{_prefix} --libdir=%{_libdir} --sysconfdir=%{_sysconfdir} --enable-shared=no --enable-static=no --enable-wide-char=yes:2w --enable-syscall=no --enable-cxx=yes --enable-pthread_flags=yes

CFLAGS="${RPM_OPT_FLAGS}" CXXFLAGS="${RPM_OPT_FLAGS}" ./configure \
	--prefix=%{_prefix} \
	--libdir=%{_libdir} \
	--sysconfdir=%{_sysconfdir} \
	--enable-shared=no \
	--enable-static=yes \
	--enable-wide-char=yes \
	--enable-bundled-unicode=no \
	--enable-xcmgrs=yes \
	--enable-syscall=no \
	--enable-debug=no \
	--enable-cxx=yes \
	--enable-pthread_flags=yes  ##CC=gcc44 CXX=g++44
make

%install
make install DESTDIR=$RPM_BUILD_ROOT
rm -f $RPM_BUILD_ROOT%{_libdir}/*.la
rm -rf $RPM_BUILD_ROOT%{_libdir}/pkgconfig

%clean
rm -rf "$RPM_BUILD_ROOT"

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%files
%defattr(-,root,root)
%{_bindir}/*
%{_sysconfdir}/qse/*

%files devel
%defattr(-,root,root)
%{_includedir}/*
%{_libdir}/*.a
