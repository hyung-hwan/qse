<!-- $Id: build.xml,v 1.7 2007-03-24 15:24:31 bacon Exp $ -->

<project name="ase" default="release" basedir=".">

	<description>
		ANT build script for ASE 
	</description>

	<!--
	<property name="destdir" location="${basedir}/release" />
	-->

	<target name="release" depends="init-release,compile">
		<jar jarfile="${destdir}/aseawk.jar"
		     basedir="${destdir}"
		     includes="**/*.class" />

		<delete dir="${destdir}" includes="**/*.class" />
		<delete dir="${destdir}/ase" />
	</target>

	<target name="debug" depends="init-debug,compile">
		<jar jarfile="${destdir}/aseawk.jar" 
		     basedir="${destdir}" 
		     includes="**/*.class" />

		<delete dir="${destdir}" includes="**/*.class" />
		<delete dir="${destdir}/ase" />
	</target>

	<target name="init-release">
		<property name="destdir" location="${basedir}/release" />
		<mkdir dir="${destdir}" />
	</target>

	<target name="init-debug">
		<property name="destdir" location="${basedir}/debug" />
		<mkdir dir="${destdir}" />
	</target>

	<target name="compile" description="compile the source code">
		<javac srcdir="awk" destdir="${destdir}" />
		<javac srcdir="test/awk" destdir="${destdir}" />
	</target>

	<target name="clean" description="clean up">
		<delete dir="${basedir}/release"
		        includes="**/*.class,**/*.jar" />
		<delete dir="${basedir}/debug"
		        includes="**/*.class,**/*.jar" />

		<delete dir="${basedir}/release/ase" />
		<delete dir="${basedir}/debug/ase" />
	</target>

</project>
