SRCS = awk.c
OBJS = $(SRCS:.c=.o)

CC = gcc
CFLAGS = -O2 -Wall -D_REENTRANT -D_THREAD_SAFE -fPIC -fno-omit-frame-pointer -fno-strict-aliasing -I../../..
LDFLAGS =  -L../../awk
LIBS =  -laseawk -lm

all: awk

awk: $(OBJS)
	$(CC) -o $@ awk.o $(LDFLAGS) $(LIBS)

java:
	javac -classpath ../../.. Awk.java AwkApplet.java

jrun:
	java -Xms1m -Xmx2m -classpath ../../.. ase.test.awk.Awk

clean:
	rm -rf *.o *.class awk 

.SUFFIXES: .c .o
.c.o:
	$(CC) -c $(CFLAGS) $<
